spring.application.name=api-gateway

# ===================================================================
# SERVER CONFIGURATION
# ===================================================================
# ðŸ”§ server.address=0.0.0.0 allows access from:
#    - localhost (same machine)
#    - Network IP (other machines on same network)
# ===================================================================
server.port=9091
server.address=0.0.0.0

# Gateway Configuration - Enable MVC Gateway
spring.cloud.gateway.mvc.enabled=true

# ===================================================================
# BACKEND SERVICE URLS
# ===================================================================
# ðŸ”§ CHANGE THIS when GraphQL service is on a different machine
# Current: GraphQL Gateway on localhost (same machine)
# ===================================================================
# Node.js GraphQL Gateway (Unified GraphQL API)
# This is the ONLY backend service the Gateway needs to know about
# GraphQL handles routing to all other services (Spring Boot, Django, Chatbot)
graphql.gateway.url=https://graphql-service-qzpq.onrender.com

# ===================================================================
# ROUTE CONFIGURATION
# ===================================================================
# Simple routing - Only GraphQL endpoint
# All queries, mutations, and subscriptions go through GraphQL
# ===================================================================

# Route Configuration - GraphQL Gateway (Main route with wildcards)
spring.cloud.gateway.mvc.routes[0].id=graphql-gateway
spring.cloud.gateway.mvc.routes[0].uri=${graphql.gateway.url}
spring.cloud.gateway.mvc.routes[0].predicates[0]=Path=/graphql/**

# Route Configuration - GraphQL Root (for Apollo Studio and direct access)
spring.cloud.gateway.mvc.routes[1].id=graphql-root
spring.cloud.gateway.mvc.routes[1].uri=${graphql.gateway.url}
spring.cloud.gateway.mvc.routes[1].predicates[0]=Path=/graphql

# Logging
logging.level.org.springframework.cloud.gateway=DEBUG
logging.level.org.springframework.web=DEBUG

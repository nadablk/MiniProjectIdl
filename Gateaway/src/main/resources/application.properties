spring.application.name=api-gateway

# ===================================================================
# SERVER CONFIGURATION
# ===================================================================
# ðŸ”§ server.address=0.0.0.0 allows access from:
#    - localhost (same machine)
#    - Network IP (other machines on same network)
# ===================================================================
server.port=9091
server.address=0.0.0.0

# Gateway Configuration - Enable MVC Gateway
spring.cloud.gateway.mvc.enabled=true

# ===================================================================
# BACKEND SERVICE URLS
# ===================================================================
# ðŸ”§ CHANGE THESE when backend services are on different machines
# Current: All services on localhost (same machine)
# ===================================================================
# Spring Boot Backend (Students & Universities)
spring.backend.url=http://localhost:8081

# Django Backend (Courses & Enrollments)
django.backend.url=http://172.31.48.1:9090

# Chatbot Service (AI Translation & Summarization)
chatbot.backend.url=http://localhost:8002

# ===================================================================
# ROUTE CONFIGURATION
# ===================================================================
# Routes use the variables defined above
# No need to change these unless modifying route paths
# ===================================================================

# Route Configuration - Spring Boot Backend (Students & Universities)
spring.cloud.gateway.mvc.routes[0].id=spring-students
spring.cloud.gateway.mvc.routes[0].uri=${spring.backend.url}
spring.cloud.gateway.mvc.routes[0].predicates[0]=Path=/api/students/**

spring.cloud.gateway.mvc.routes[1].id=spring-universities
spring.cloud.gateway.mvc.routes[1].uri=${spring.backend.url}
spring.cloud.gateway.mvc.routes[1].predicates[0]=Path=/api/universities/**

# Route Configuration - Django Backend (Courses & Enrollments)
spring.cloud.gateway.mvc.routes[2].id=django-courses
spring.cloud.gateway.mvc.routes[2].uri=${django.backend.url}
spring.cloud.gateway.mvc.routes[2].predicates[0]=Path=/api/courses/**

spring.cloud.gateway.mvc.routes[3].id=django-enrollments
spring.cloud.gateway.mvc.routes[3].uri=${django.backend.url}
spring.cloud.gateway.mvc.routes[3].predicates[0]=Path=/api/enrollments/**

# Route Configuration - GraphQL (Spring Boot)
spring.cloud.gateway.mvc.routes[4].id=spring-graphql
spring.cloud.gateway.mvc.routes[4].uri=${spring.backend.url}
spring.cloud.gateway.mvc.routes[4].predicates[0]=Path=/graphql/spring/**

# Route Configuration - GraphQL (Django)
spring.cloud.gateway.mvc.routes[5].id=django-graphql
spring.cloud.gateway.mvc.routes[5].uri=${django.backend.url}
spring.cloud.gateway.mvc.routes[5].predicates[0]=Path=/graphql/django/**

# Route Configuration - Chatbot Service (Translation & Summarization)
spring.cloud.gateway.mvc.routes[6].id=chatbot-translate
spring.cloud.gateway.mvc.routes[6].uri=${chatbot.backend.url}
spring.cloud.gateway.mvc.routes[6].predicates[0]=Path=/api/chatbot/translate/**
spring.cloud.gateway.mvc.routes[6].filters[0]=StripPrefix=2

spring.cloud.gateway.mvc.routes[7].id=chatbot-summarize
spring.cloud.gateway.mvc.routes[7].uri=${chatbot.backend.url}
spring.cloud.gateway.mvc.routes[7].predicates[0]=Path=/api/chatbot/summarize/**
spring.cloud.gateway.mvc.routes[7].filters[0]=StripPrefix=2

spring.cloud.gateway.mvc.routes[8].id=chatbot-health
spring.cloud.gateway.mvc.routes[8].uri=${chatbot.backend.url}
spring.cloud.gateway.mvc.routes[8].predicates[0]=Path=/api/chatbot/health/**
spring.cloud.gateway.mvc.routes[8].filters[0]=StripPrefix=2

# Logging
logging.level.org.springframework.cloud.gateway=DEBUG
logging.level.org.springframework.web=DEBUG
